/*!
 * @tawaship/pixim.js - v1.8.0
 * 
 * @require pixi.js v5.2.1
 * @require howler.js v2.2.0 (If use sound)
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
!function(t,i,e){"use strict";window.console.log("%c pixim.js%cv1.8.0 %c","color: #FFF; background: #03F; padding: 5px; border-radius:12px 0 0 12px; margin-top: 5px; margin-bottom: 5px;","color: #FFF; background: #F33; padding: 5px;  border-radius:0 12px 12px 0;","padding: 5px;");
/*!
 * @tawaship/emitter - v3.0.0
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
var n,r=function(){this._events={}},a={eventNames:{configurable:!0}};a.eventNames.get=function(){return Object.keys(this._events)},r.prototype._on=function(t,i,e){if(!t||!i)return this;for(var n=this._events[t]=this._events[t]||[],r=0;r<n.length;r++)if(n[r].func===i)return this;return n.push({func:i,once:e}),this},r.prototype.on=function(t,i){return this._on(t,i,!1)},r.prototype.once=function(t,i){return this._on(t,i,!0)},r.prototype.off=function(t,i){if(!t||!i)return this;for(var e=this._events[t]||[],n=0;n<e.length;n++)if(e[n].func===i)return e.splice(n,1),this;return this},r.prototype.emit=function(t){for(var i=[],e=arguments.length-1;e-- >0;)i[e]=arguments[e+1];if(!t)return this;for(var n=this._events[t]||[],r=[],a=n.length-1;a>=0;a--){var o=n[a];o.once&&n.splice(a,1),r.push(o)}for(var s=r.length-1;s>=0;s--)r[s].func.apply(this,i);return this},r.prototype.cemit=function(t,i){for(var e=[],n=arguments.length-2;n-- >0;)e[n]=arguments[n+2];if(!t||null==i)return this;for(var r=this._events[t]||[],a=[],o=r.length-1;o>=0;o--){var s=r[o];s.once&&r.splice(o,1),a.push(s)}for(var p=a.length-1;p>=0;p--)a[p].func.apply(i,e);return this},r.prototype.clear=function(t){return void 0===t&&(t=""),t?delete this._events[t]:this._events={},this},Object.defineProperties(r.prototype,a),function(t){var i=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(r);t.Emitter=i}(n||(n={}));var o,s=n.Emitter;!function(t){var i={},e=function(){throw new Error("This class can not instantiate.")};e.addObserver=function(t,e){i[t]=e},e.removeObserver=function(t){delete i[t]},e.done=function(t){for(var e in i)i[e].updateTask(t)},t.TaskManager=e}(o||(o={}));var p,h=o.TaskManager;!function(t){var e={},n=function(t){function n(e,n){var r=this;void 0===e&&(e={}),void 0===n&&(n={}),t.call(this);var a=new i.Application(e);a.stop();var o=a.stage,s=a.view;s.style.position="absolute";n.autoAdjust;if(this._piximData={isRun:!1,app:a,stage:o,view:s,container:n.container||document.body,layers:{},options:n},this._piximData.app.ticker.add((function(t){h.done({delta:t})})),n.autoAdjust){var p=function(){r.fullScreen()};window.addEventListener("resize",p),p()}}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={app:{configurable:!0},stage:{configurable:!0},view:{configurable:!0},container:{configurable:!0}};return r.app.get=function(){return this._piximData.app},r.stage.get=function(){return this._piximData.stage},r.view.get=function(){return this._piximData.view},r.container.get=function(){return this._piximData.container},r.container.set=function(t){this._piximData.container=t||document.body,this._piximData.view.parentNode&&this._piximData.container.appendChild(this._piximData.view)},n.prototype._hasLayer=function(t){return!!this._piximData.layers[t]},n.prototype.addLayer=function(t){return this._hasLayer(t)||(this._piximData.layers[t]=this._piximData.stage.addChild(new i.Container)),this},n.prototype.removeLayer=function(t){return this._hasLayer(t)?(this._piximData.stage.removeChild(this._piximData.layers[t]),delete this._piximData.layers[t],this):this},n.prototype.attachAsync=function(t,i){var n=this;return void 0===i&&(i="anonymous"),t.buildAsync().then((function(r){return n.addLayer(i),e[t.contentID]=r,n._piximData.layers[i].addChild(r),r}))},n.prototype.detach=function(t){var i=e[t.contentID];return i?(this._destroyRoot(i),delete e[t.contentID],this):this},n.prototype.play=function(){return this._piximData.isRun||(this._piximData.container.appendChild(this._piximData.view),this._piximData.app.start(),this._piximData.isRun=!0),this},n.prototype.stop=function(){if(!this._piximData.isRun)return this;this._piximData.view.parentNode&&this._piximData.view.parentNode.removeChild(this._piximData.view),this._piximData.app.stop(),this._piximData.isRun=!1;this._piximData.app.stage;var t=this._piximData.layers;for(var i in t)t[i].removeChildren();var n=[];for(var r in e)this._destroyRoot(e[r]),n.push(r);for(var a=0;a<n.length;a++)delete e[n[a]];return this._piximData.app.ticker.update(),this},n.prototype._destroyRoot=function(t){t.parent&&t.parent.removeChild(t),t.destroy()},n.prototype.pause=function(t){return this._piximData.isRun?(t?this._piximData.app.stop():this._piximData.app.start(),this):this},n.prototype.fullScreen=function(){var t=this._piximData.view,i=this._piximData.container;return(i.offsetWidth||window.innerWidth)/(i.offsetHeight||window.innerHeight)>t.width/t.height?this.adjustHeight().toCenter().toTop():this.adjustWidth().toMiddle().toLeft()},n.prototype.adjustWidth=function(){var t=this._piximData.view,i=this._piximData.container.offsetWidth||window.innerWidth,e=i/t.width*t.height;return t.style.width=i+"px",t.style.height=e+"px",this},n.prototype.adjustHeight=function(){var t=this._piximData.view,i=this._piximData.container.offsetHeight||window.innerHeight,e=i/t.height*t.width;return t.style.height=i+"px",t.style.width=e+"px",this},n.prototype.toLeft=function(){return this._piximData.view.style.left="0px",this},n.prototype.toCenter=function(){var t=this._piximData.view,i=this._piximData.container.offsetWidth||window.innerWidth;return t.style.left=(i-this._getViewRect().width)/2+"px",this},n.prototype.toRight=function(){var t=this._piximData.view,i=this._piximData.container.offsetWidth||window.innerWidth;return t.style.left=i-this._getViewRect().width+"px",this},n.prototype.toTop=function(){return this._piximData.view.style.top="0px",this},n.prototype.toMiddle=function(){var t=this._piximData.view,i=this._piximData.container.offsetHeight||window.innerHeight;return t.style.top=(i-this._getViewRect().height)/2+"px",this},n.prototype.toBottom=function(){var t=this._piximData.view,i=this._piximData.container.offsetHeight||window.innerHeight;return t.style.top=i-this._getViewRect().height+"px",this},n.prototype._getViewRect=function(){var t=this._piximData.view;return{x:parseInt(t.style.left.replace("px","")),y:parseInt(t.style.top.replace("px","")),width:parseInt(t.style.width.replace("px","")),height:parseInt(t.style.height.replace("px",""))}},Object.defineProperties(n.prototype,r),n}(s);t.Application=n}(p||(p={}));var u,c=p.Application,f=function(t,i){void 0===i&&(i=null),t instanceof Function&&(t=[t]),this._taskData={context:null===i?this:i,enabled:!0,index:0,tasks:t,current:null},this.first()},d={enabled:{configurable:!0}};
/*!
 * @tawaship/task - v1.0.1
 * 
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */d.enabled.get=function(){return this._taskData.enabled},d.enabled.set=function(t){this._taskData.enabled=t},f.prototype.done=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];if(this._taskData.enabled&&this._taskData.current)return this._taskData.current.apply(this._taskData.context,t)},f.prototype.first=function(){return this._taskData.tasks[0]?(this._taskData.current=this._taskData.tasks[this._taskData.index=0],this):this},f.prototype.prev=function(){return this._taskData.tasks[this._taskData.index-1]?(this._taskData.current=this._taskData.tasks[--this._taskData.index],this):this},f.prototype.next=function(){return this._taskData.tasks[this._taskData.index+1]?(this._taskData.current=this._taskData.tasks[++this._taskData.index],this):this},f.prototype.to=function(t){return this._taskData.tasks[t]?(this._taskData.current=this._taskData.tasks[this._taskData.index=Number(t)],this):this},f.prototype.reset=function(){return this._taskData.tasks=[],this._taskData.current=null,this._taskData.index=0,this},f.prototype.add=function(t){t instanceof Function&&(t=[t]);for(var i=this._taskData.tasks,e=0===i.length,n=0;n<t.length;n++)i.push(t[n]);return e&&this.first(),this},f.prototype.replace=function(t){t instanceof Function&&(t=[t]),this.reset();this._taskData.tasks;return this._taskData.tasks=t,this.first(),this},f.prototype.destroy=function(){this._taskData.context=null,this._taskData.tasks=[],this._taskData.current=null},Object.defineProperties(f.prototype,d),function(t){var i=function(t){function i(i,e){t.call(this,i,e),this.enabled=!0,this._piximData={emitter:new s}}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var e={eventNames:{configurable:!0}};return i.prototype.on=function(t,i){return this._piximData.emitter.on(t,i),this},i.prototype.once=function(t,i){return this._piximData.emitter.once(t,i),this},i.prototype.off=function(t,i){return this._piximData.emitter.off(t,i),this},i.prototype.emit=function(t){for(var i,e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return this._taskData.enabled?((i=this._piximData.emitter).emit.apply(i,[t].concat(e)),this):this},i.prototype.cemit=function(t,i){for(var e,n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return this._taskData.enabled?((e=this._piximData.emitter).cemit.apply(e,[t,i].concat(n)),this):this},i.prototype.clear=function(t){return void 0===t&&(t=""),this._piximData.emitter.clear(t),this},e.eventNames.get=function(){return this._piximData.emitter.eventNames},i.prototype.destroy=function(){t.prototype.destroy.call(this),this.clear()},Object.defineProperties(i.prototype,e),i}(f);t.Task=i}(u||(u={}));var l,_=u.Task;!function(t){var e=0,n=function(t){function i(){for(var i=this,n=[],r=arguments.length;r--;)n[r]=arguments[r];t.call(this),this._piximData={task:new _([],this),taskEnabledChildren:!0};var a=e++;this.on("added",(function(){h.addObserver(a,i)})),this.on("removed",(function(){h.removeObserver(a)}))}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var n={taskEnabled:{configurable:!0},taskEnabledChildren:{configurable:!0},task:{configurable:!0}};return i.prototype.updateTask=function(t){var e=this._piximData.task;if(this.taskEnabled){for(var n=this,r=!0;n;){if(n instanceof i&&!n.taskEnabledChildren){r=!1;break}n=n.parent}if(r){e.done(t);for(var a=e.eventNames,o=0;o<a.length;o++)e.cemit(a[o],this,t)}}},n.taskEnabled.get=function(){return this._piximData.task.enabled},n.taskEnabled.set=function(t){this._piximData.task.enabled=t},n.taskEnabledChildren.get=function(){return this._piximData.taskEnabledChildren},n.taskEnabledChildren.set=function(t){this._piximData.taskEnabledChildren=t},n.task.get=function(){return this._piximData.task},i.prototype.destroy=function(){for(var i=[],e=arguments.length;e--;)i[e]=arguments[e];t.prototype.destroy.apply(this,i),this._piximData.task.destroy()},Object.defineProperties(i.prototype,n),i}(i.Container);t.Container=n}(l||(l={}));var v,m=l.Container;!function(t){var e={},n=function(){this._manifests={}};n.prototype.add=function(t,i){void 0===i&&(i={});var e=i.unrequired||!1;for(var n in t)this._manifests[n]={url:t[n],unrequired:e}},n.prototype.getAsync=function(t){var i=this._manifests,n={},r={},a=e;for(var o in i){var s=i[o],p=this._resolvePath(s.url,t),h=p.replace(/\?.*/,"");a[h]?n[o]=a[h]:r[o]={url:p,name:h,unrequired:s.unrequired}}return 0===Object.keys(r).length?Promise.resolve(n):this._loadAsync(r).then((function(t){for(var i in t)n[i]=t[i].resource,t[i].error||(a[r[i].name]=t[i].resource);return n}))},n.prototype._loadAsync=function(t){return Promise.resolve({})},n.prototype._resolvePath=function(t,e){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t:i.utils.url.resolve(e,t)},t.ContentManifestBase=n}(v||(v={}));var y,D=v.ContentManifestBase;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t){return new Promise((function(e,n){var r=new i.Loader;for(var a in t)r.add(a,t[a].url,{crossOrigin:!0});var o={};r.load((function(i,r){var a,s;for(var p in r){var h=r[p];if(!h)return void n((a={},a[p]=t[p].url,a));if(h.error&&!t[p].unrequired)return void n((s={},s[p]=t[p].url,s));o[p]={resource:h.texture,error:!!h.error}}e(o)}))}))},e}(D);t.ContentImageManifest=e}(y||(y={}));var x,g=y.ContentImageManifest;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._loadAsync=function(t){return new Promise((function(e,n){var r=new i.Loader;for(var a in t)r.add(a,t[a].url,{crossOrigin:!0});var o={};r.load((function(i,r){var a,s;for(var p in r)if(t[p]){var h=r[p];if(!h)return void n((a={},a[p]=t[p].url,a));var u=h.textures||{};h.error;if(h.error&&!t[p].unrequired)return void n((s={},s[p]=t[p].url,s));o[p]={resource:u,error:!!h.error}}e(o)}))}))},e}(D);t.ContentSpritesheetManifest=e}(x||(x={}));var w,b=x.ContentSpritesheetManifest;!function(t){var i=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype._loadAsync=function(t){return new Promise((function(i,n){var r,a={};function o(t,e,n){a[t]={resource:e,error:n},++p<s||i(a)}var s=0,p=0;for(var h in t){if(!e.Howl)return console.warn('You need "howler.js" to load sound asset.'),void n((r={},r[h]=t[h].url,r));++s}var u=function(i){var r=c,a=new e.Howl({src:t[r].url,onload:function(){o(r,a,!1)},onloaderror:function(){var i;t[r].unrequired?o(r,a,!0):n(((i={})[r]=t[r].url,i))}})};for(var c in t)u()}))},i}(D);t.ContentSoundManifest=i}(w||(w={}));var k,C=w.ContentSoundManifest;!function(t){var i=function(t){this._piximData={width:t.width,height:t.height,lib:t.lib,resources:t.resources,vars:t.vars}},e={width:{configurable:!0},height:{configurable:!0},lib:{configurable:!0},resources:{configurable:!0},vars:{configurable:!0}};e.width.get=function(){return this._piximData.width},e.height.get=function(){return this._piximData.height},e.lib.get=function(){return this._piximData.lib},e.resources.get=function(){return this._piximData.resources},e.vars.get=function(){return this._piximData.vars},Object.defineProperties(i.prototype,e),t.ContentDeliver=i}(k||(k={}));var A,P=k.ContentDeliver;!function(t){var i={},e=0;function n(){return{images:new g,spritesheets:new b,sounds:new C}}var r=function t(i,r){void 0===i&&(i={}),void 0===r&&(r=t._piximData);var a=(i.basepath||"").replace(/([^/])$/,"$1/");this._piximData={contentID:(++e).toString(),basepath:a,$:new P({width:r.config.width,height:r.config.height,lib:r.lib,resources:{},vars:{}}),manifests:r.manifests,additionalManifests:n(),preloadPromise:null,postloadPromise:null}},a={contentID:{configurable:!0}};r.create=function(t){if(void 0===t&&(t=""),t&&t in i)throw new Error("Content key '"+t+"' has already exists.");var e=function(t){function i(e){void 0===e&&(e={}),t.call(this,e,i._piximData)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i}(r);return e._piximData={config:{width:450,height:800},manifests:n(),lib:{}},t?i[t]=e:e},r.get=function(t){return i[t]},r.remove=function(t){delete i[t]},r.defineManifests=function(t,i,e){return void 0===e&&(e={}),this._piximData.manifests[t]?(this._piximData.manifests[t].add(i,e),this):this},r.defineImages=function(t,i){return void 0===i&&(i={}),this.defineManifests("images",t,i)},r.defineSpritesheets=function(t,i){return void 0===i&&(i={}),this.defineManifests("spritesheets",t,i)},r.defineSounds=function(t,i){return void 0===i&&(i={}),this.defineManifests("sounds",t,i)},r.setConfig=function(t){return this._piximData.config.width=t.width,this._piximData.config.height=t.height,this},r.defineLibraries=function(t){for(var i in t)this._piximData.lib[i]=t[i];return this},a.contentID.get=function(){return this._piximData.contentID},r.prototype.addManifests=function(t,i,e){return void 0===e&&(e={}),this._piximData.additionalManifests[t]?(this._piximData.additionalManifests[t].add(i,e),this):this},r.prototype.addImages=function(t,i){return void 0===i&&(i={}),this.addManifests("images",t,i)},r.prototype.addSpritesheets=function(t,i){return void 0===i&&(i={}),this.addManifests("spritesheets",t,i)},r.prototype.addSounds=function(t,i){return void 0===i&&(i={}),this.addManifests("sounds",t,i)},r.prototype.addVars=function(t){for(var i in t)this._piximData.$.vars[i]=t[i];return this},r.prototype.defineVars=function(t){return this.addVars(t)},r.prototype.prepareAsync=function(){var t=this;return this.preloadClassAssetAsync().then((function(){return t.preloadInstanceAssetAsync()}))},r.prototype.buildAsync=function(){var t=this;if(!this._piximData.$.lib.root)throw new Error('There is no library named "root" in the content.');return this.prepareAsync().then((function(){return new t._piximData.$.lib.root(t._piximData.$)}))},r.prototype.preloadClassAssetAsync=function(){var t=this;return this._piximData.preloadPromise?this._piximData.preloadPromise:this._piximData.preloadPromise=this._loadAssetAsync(this._piximData.manifests).catch((function(i){throw t._piximData.preloadPromise=null,i}))},r.prototype.preloadInstanceAssetAsync=function(){var t=this;return this._piximData.postloadPromise?this._piximData.postloadPromise:this._piximData.postloadPromise=this._loadAssetAsync(this._piximData.additionalManifests).then((function(){t._piximData.postloadPromise=null})).catch((function(i){throw t._piximData.postloadPromise=null,i}))},r.prototype._loadAssetAsync=function(t){var i=this._piximData.basepath,e=this._piximData.$.resources;if(0===Object.keys(t).length)return Promise.resolve();var n=[],r=[];for(var a in t){var o=a;r.push(o),n.push(t[o].getAsync(i))}return Promise.all(n).then((function(t){for(var i=0;i<t.length;i++)for(var n in e[r[i]]=e[r[i]]||{},t[i])e[r[i]][n]=t[i][n]})).catch((function(t){for(var i in t)console.error("Asset '"+i+": "+t[i]+"' cannot load.");throw t}))},Object.defineProperties(r.prototype,a),t.Content=r}(A||(A={}));var M=A.Content;t.Application=c,t.Container=m,t.Content=M,t.ContentImageManifest=g,t.ContentManifestBase=D,t.ContentSoundManifest=C,t.ContentSpritesheetManifest=b,t.Emitter=s,t.Task=_}(this.Pixim=this.Pixim||{},PIXI,{Howl:"undefined"==typeof Howl?null:Howl});