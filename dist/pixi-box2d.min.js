/*!
 * pixi-box2d - v1.0.0
 * 
 * @require pixi.js v5.3.2
 * @require Box2d.js
 * @author tawaship (makazu.mori@gmail.com)
 * @license MIT
 */
this.PIXI=this.PIXI||{},function(t,e,o){"use strict";var i,n=e.Common.Math.b2Vec2,r=e.Dynamics.b2DebugDraw,a=e.Dynamics.b2World,s=(e.Dynamics.Contacts.box2dContact,e.Dynamics.b2ContactListener),d=e.Dynamics.b2BodyDef,c=e.Dynamics.b2FixtureDef,b=e.Dynamics.b2Body,l=e.Collision.Shapes.b2CircleShape,p=e.Collision.Shapes.b2PolygonShape;e.Collision.Shapes.b2EdgeShape;!function(t){!function(t){var e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.Container);t.ContainerBase=e}(t.box2d||(t.box2d={}))}(i||(i={}));var u,y=i.box2d.ContainerBase,x=1/30,f={ticker:null};!function(t){!function(t){function e(t){var e=t.GetFixtureA().GetUserData(),o=t.GetFixtureB().GetUserData();e&&e.emit&&e.emit("BeginContact",o),o&&o.emit&&o.emit("BeginContact",e)}function o(t){var e=t.GetFixtureA().GetUserData(),o=t.GetFixtureB().GetUserData();e&&e.emit&&e.emit("EndContact",o),o&&o.emit&&o.emit("EndContact",e)}function i(t){var e=t.GetFixtureA().GetUserData(),o=t.GetFixtureB().GetUserData();e&&e.emit&&e.emit("PreSolve",o),o&&o.emit&&o.emit("PreSolve",e)}function r(t){var e=t.GetFixtureA().GetUserData(),o=t.GetFixtureB().GetUserData();e&&e.emit&&e.emit("PostSolve",o),o&&o.emit&&o.emit("PostSolve",e)}var d=function(t){function d(d){var c=this;void 0===d&&(d={}),t.call(this);var b="number"==typeof d.gravityX?d.gravityX:0,l="number"==typeof d.gravityY?d.gravityY:9.8,p=!!d.allowSleep,u=new a(new n(b,l),p);this._box2dData={world:u,listener:new s,enabled:!0,speed:1,targets:{},deletes:{},ticker:d.ticker},this.on("added",(function(){c._box2dData.ticker=c._box2dData.ticker||f.ticker,c._box2dData.ticker.add(c._handleTick,c)})),this.on("removed",(function(){c._box2dData.ticker.remove(c._handleTick,c)}));var y=this._box2dData.listener;d.listenBeginContact&&(y.BeginContact=e),d.listenEndContact&&(y.EndContact=o),d.listenPreSolve&&(y.PreSolve=i),d.listenPostSolve&&(y.PostSolve=r),u.SetContactListener(y),this.box2dEnabled=!0}t&&(d.__proto__=t),d.prototype=Object.create(t&&t.prototype),d.prototype.constructor=d;var c={speed:{configurable:!0},box2dEnabled:{configurable:!0},world:{configurable:!0}};return d.prototype._handleTick=function(t){if(this._box2dData.enabled){var e=this._box2dData.world;e.Step(t*this._box2dData.speed/30,10,10),e.ClearForces(),e.DrawDebugData();var o=this._box2dData.targets;for(var i in this._box2dData.deletes){var n=this._box2dData.deletes[i];delete o[i],e.DestroyBody(n.body),n.body=null}for(var r in this._box2dData.deletes=[],o){var a=o[r],s=a.body.GetPosition();a.x=30*s.x,a.y=30*s.y,a.rotation=a.body.GetAngle()}}},c.speed.get=function(){return this._box2dData.speed},c.speed.set=function(t){this._box2dData.speed=t},c.box2dEnabled.get=function(){return this._box2dData.enabled},c.box2dEnabled.set=function(t){this._box2dData.enabled=t},c.world.get=function(){return this._box2dData.world},d.prototype.addBox2d=function(t){if(!t.body){for(var e=this._box2dData.world.CreateBody(t.getBodyDef()),o=t.getFixtureDefs(),i=0;i<o.length;i++)e.CreateFixture(o[i]);t.body=e,e.SetPosition({x:t.x*x,y:t.y*x}),e.SetAngle(t.rotation)}return this.addChild(t),this._box2dData.targets[t.box2dID]=t,delete this._box2dData.deletes[t.box2dID],t},d.prototype.removeBox2d=function(t){return this.removeChild(t),this._box2dData.deletes[t.box2dID]=t,t},Object.defineProperties(d.prototype,c),d}(y);t.WorldContainer=d}(t.box2d||(t.box2d={}))}(u||(u={}));var h,D=u.box2d.WorldContainer;!function(t){!function(t){function e(t){void 0===t&&(t=!1);var e=new d;return t?e.type=b.b2_dynamicBody:b.b2_staticBody,e}var i=e(!0),n=e(!1);function r(t,e){void 0===t&&(t={});var o=new c;return o.density="number"==typeof t.density?t.density:o.density,o.friction="number"==typeof t.friction?t.friction:o.friction,o.restitution="number"==typeof t.restitution?t.restitution:o.restitution,o.filter.categoryBits="number"==typeof t.categoryBits?t.categoryBits:o.filter.categoryBits,o.filter.maskBits="number"==typeof t.maskBits?t.maskBits:o.filter.maskBits,o.isSensor=!!t.isSensor,o.userData=e,o}var a={positionX:Object.getOwnPropertyDescriptor(o.ObservablePoint.prototype,"x"),positionY:Object.getOwnPropertyDescriptor(o.ObservablePoint.prototype,"y"),positionSet:o.ObservablePoint.prototype.set,rotation:Object.getOwnPropertyDescriptor(o.DisplayObject.prototype,"rotation")},s=function(t){function e(o){void 0===o&&(o={}),t.call(this),this._box2dData={id:e._id++,body:null,bodyDef:o.isStatic?n:i,fixtureDefs:[r(o,this)],pixi:null}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={box2dID:{configurable:!0},body:{configurable:!0},x:{configurable:!0},y:{configurable:!0},rotation:{configurable:!0}};return e.prototype.BeginContact=function(t){},e.prototype.EndContact=function(t){},e.prototype.PreSolve=function(t){},e.prototype.PostSolve=function(t){},e.prototype.getBodyDef=function(){return this._box2dData.bodyDef},e.prototype.getFixtureDefs=function(){return this._box2dData.fixtureDefs},o.box2dID.get=function(){return this._box2dData.id},o.body.get=function(){return this._box2dData.body},o.body.set=function(t){this._box2dData.body=t},o.x.get=function(){return a.positionX.get.call(this.position)},o.x.set=function(t){a.positionX.set.call(this.position,t);var e=this._box2dData.body;if(e){var o=e.GetPosition();o.x=t*x,e.SetPosition(o)}},o.y.get=function(){return a.positionY.get.call(this.position)},o.y.set=function(t){a.positionY.set.call(this.position,t);var e=this._box2dData.body;if(e){var o=e.GetPosition();o.y=t*x,e.SetPosition(o)}},o.rotation.get=function(){return a.rotation.get.call(this)},o.rotation.set=function(t){a.rotation.set.call(this,t);var e=this._box2dData.body;e&&e.SetAngle(t)},e.prototype.addMask=function(t){for(var e=this._box2dData.body.GetFixtureList();e;){var o=e.GetFilterData();o.maskBits|=t,e.SetFilterData(o),e=e.GetNext()}},e.prototype.addAllMask=function(){for(var t=this._box2dData.body.GetFixtureList();t;){var e=t.GetFilterData();e.maskBits=65535,t.SetFilterData(e),t=t.GetNext()}},e.prototype.removeMask=function(t){for(var e=this._box2dData.body.GetFixtureList();e;){var o=e.GetFilterData();o.maskBits^=o.maskBits&t,e.SetFilterData(o),e=e.GetNext()}},e.prototype.removeAllMask=function(){for(var t=this._box2dData.body.GetFixtureList();t;){var e=t.GetFilterData();e.maskBits=0,t.SetFilterData(e),t=t.GetNext()}},e.prototype.toDynamic=function(){this._box2dData.body&&this._box2dData.body.SetType(b.b2_dynamicBody)},e.prototype.toStatic=function(){this._box2dData.body&&this._box2dData.body.SetType(b.b2_staticBody)},Object.defineProperties(e.prototype,o),e}(y);s._id=0,t.Box2dObject=s,delete s.prototype.BeginContact,delete s.prototype.EndContact,delete s.prototype.PreSolve,delete s.prototype.PostSolve}(t.box2d||(t.box2d={}))}(h||(h={}));var v,g=h.box2d.Box2dObject;!function(t){!function(t){var e=function(t){function e(e,o){void 0===o&&(o={}),t.call(this,o),this.getFixtureDefs()[0].shape=new l(e*x)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.from=function(t,i){void 0===i&&(i={});var n=new e(Math.max(t.width/2,t.height/2),i),r=n.addChild(new o.Container);r.addChild(t);var a=n.getLocalBounds();return r.x=-a.x-t.width/2,r.y=-a.y-t.height/2,n},e}(g);t.Circle=e}(t.box2d||(t.box2d={}))}(v||(v={}));var _,m=v.box2d.Circle;!function(t){!function(t){var e=function(t){function e(e,o,i){void 0===i&&(i={}),t.call(this,i),e*=x,o*=x;var r=this.getFixtureDefs()[0];r.shape=new p,r.shape.SetAsArray([new n(0,0),new n(e,0),new n(e,o),new n(0,o)])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.from=function(t,i){void 0===i&&(i={});var n=new e(t.width,t.height,i),r=n.addChild(new o.Container);r.addChild(t);var a=n.getLocalBounds();return r.x=-a.x,r.y=-a.y,n},e}(g);t.Rectangle=e}(t.box2d||(t.box2d={}))}(_||(_={}));var S,w=_.box2d.Rectangle;!function(t){!function(t){var e=function(t){function e(e,o){void 0===o&&(o={}),t.call(this,o);var i=this.getFixtureDefs()[0];i.shape=new p,i.shape.SetAsArray(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g);t.Polygon=e}(t.box2d||(t.box2d={}))}(S||(S={}));var B,C=S.box2d.Polygon;!function(t){!function(t){var e=function(t){function e(e,o){void 0===o&&(o={}),t.call(this,o);var i=this.getFixtureDefs()[0];i.shape=new p,i.shape.SetAsEdge({x:0,y:0},{x:e.x*x,y:e.y*x})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(g);t.Edge=e}(t.box2d||(t.box2d={}))}(B||(B={}));var P,G=B.box2d.Edge,F=!1;!function(t){!function(e){e.init=function(e){return void 0===e&&(e={}),F?(console.warn("[PIXI-box2d] Already initialized."),t.box2d):(e.ticker||console.warn("[PIXI-box2d] It may not work because no default ticker is specified."),f.ticker=e.ticker,F=!0,t.box2d)},e.addDebugDraw=function(t,e){var o=document.createElement("canvas");e.parentNode&&e.parentNode.appendChild(o),o.width=e.width,o.height=e.height,o.style.width=e.style.width,o.style.height=e.style.height,o.style.top=e.style.top||"0",o.style.left=e.style.left||"0",o.style.position="absolute",o.style.pointerEvents="none",o.style.zIndex="100";var i=new r;return i.SetSprite(o.getContext("2d")),i.SetDrawScale(30),i.SetFillAlpha(.5),i.SetLineThickness(1),i.SetFlags(r.e_shapeBit|r.e_jointBit),t.world.SetDebugDraw(i),o}}(t.box2d||(t.box2d={}))}(P||(P={}));var k=P.box2d.init,O=P.box2d.addDebugDraw;t.Box2dObject=g,t.Circle=m,t.Edge=G,t.Polygon=C,t.Rectangle=w,t.WorldContainer=D,t.addDebugDraw=O,t.init=k}(this.PIXI.box2d=this.PIXI.box2d||{},Box2D,PIXI);//# sourceMappingURL=pixi-box2d.min.js.map
